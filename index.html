<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.6.42">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>NSEC SG2 Timelines Dataset Documentation</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1em; /* quarto-specific, see https://github.com/quarto-dev/quarto-cli/issues/4556 */ 
  vertical-align: middle;
}
</style>


<script src="index_files/libs/clipboard/clipboard.min.js"></script>
<script src="index_files/libs/quarto-html/quarto.js"></script>
<script src="index_files/libs/quarto-html/popper.min.js"></script>
<script src="index_files/libs/quarto-html/tippy.umd.min.js"></script>
<script src="index_files/libs/quarto-html/anchor.min.js"></script>
<link href="index_files/libs/quarto-html/tippy.css" rel="stylesheet">
<link href="index_files/libs/quarto-html/quarto-syntax-highlighting-2f5df379a58b258e96c21c0638c20c03.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="index_files/libs/bootstrap/bootstrap.min.js"></script>
<link href="index_files/libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="index_files/libs/bootstrap/bootstrap-1bc8a17f135ab3d594c857e9f48e611b.min.css" rel="stylesheet" append-hash="true" id="quarto-bootstrap" data-mode="light">


</head>

<body>

<div id="quarto-content" class="page-columns page-rows-contents page-layout-article">
<div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
  <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">Table of contents</h2>
   
  <ul>
  <li><a href="#disclaimer" id="toc-disclaimer" class="nav-link active" data-scroll-target="#disclaimer">1. Disclaimer</a>
  <ul class="collapse">
  <li><a href="#license" id="toc-license" class="nav-link" data-scroll-target="#license">License</a></li>
  </ul></li>
  <li><a href="#explanation-database" id="toc-explanation-database" class="nav-link" data-scroll-target="#explanation-database">2. Explanation Database</a>
  <ul class="collapse">
  <li><a href="#attribute-definitions" id="toc-attribute-definitions" class="nav-link" data-scroll-target="#attribute-definitions">Attribute Definitions</a></li>
  <li><a href="#current-version" id="toc-current-version" class="nav-link" data-scroll-target="#current-version">Current Version</a></li>
  <li><a href="#projection" id="toc-projection" class="nav-link" data-scroll-target="#projection">Projection</a></li>
  <li><a href="#local-projection-table" id="toc-local-projection-table" class="nav-link" data-scroll-target="#local-projection-table">Local Projection Table</a></li>
  </ul></li>
  <li><a href="#status" id="toc-status" class="nav-link" data-scroll-target="#status">3. Status</a>
  <ul class="collapse">
  <li><a href="#attributes-to-be-filled-in-with-each-status" id="toc-attributes-to-be-filled-in-with-each-status" class="nav-link" data-scroll-target="#attributes-to-be-filled-in-with-each-status">Attributes to be filled in with each status</a></li>
  <li><a href="#mapping-status-used-in-uk-ireland-to-nsec-status" id="toc-mapping-status-used-in-uk-ireland-to-nsec-status" class="nav-link" data-scroll-target="#mapping-status-used-in-uk-ireland-to-nsec-status">Mapping status used in UK &amp; Ireland to NSEC status</a>
  <ul class="collapse">
  <li><a href="#ireland-mapping" id="toc-ireland-mapping" class="nav-link" data-scroll-target="#ireland-mapping">Ireland mapping:</a></li>
  <li><a href="#uk-mapping" id="toc-uk-mapping" class="nav-link" data-scroll-target="#uk-mapping">UK Mapping:</a></li>
  </ul></li>
  </ul></li>
  <li><a href="#foundation-technique" id="toc-foundation-technique" class="nav-link" data-scroll-target="#foundation-technique">4. Foundation Technique</a></li>
  </ul>
</nav>
</div>
<main class="content" id="quarto-document-content">

<header id="title-block-header" class="quarto-title-block default">
<div class="quarto-title">
<h1 class="title">NSEC SG2 Timelines Dataset Documentation</h1>
</div>



<div class="quarto-title-meta">

    
  
    
  </div>
  


</header>


<section id="disclaimer" class="level1">
<h1>1. Disclaimer</h1>
<p>These data are published for general information only and do not constitute legal or professional advice. No responsibility is accepted for errors, omissions, or for any consequences arising from the use of the information provided.</p>
<section id="license" class="level2">
<h2 class="anchored" data-anchor-id="license">License</h2>
<p>CC-BY-4.0 - Timelines DB by NSEC.</p>
</section>
</section>
<section id="explanation-database" class="level1">
<h1>2. Explanation Database</h1>
<section id="attribute-definitions" class="level2">
<h2 class="anchored" data-anchor-id="attribute-definitions">Attribute Definitions</h2>
<p>Definitions of attributes in the database with their corresponding data type. The current public dataset only contains the latest version data.</p>
<table class="caption-top table">
<caption>Table 1. Attributes used in the NSEC Timelines database, their corresponding datatypes and definition.</caption>
<colgroup>
<col style="width: 50%">
<col style="width: 22%">
<col style="width: 27%">
</colgroup>
<thead>
<tr class="header">
<th>Attribute name</th>
<th>Data type</th>
<th>Discription</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>name</td>
<td>string</td>
<td>Describes the official name of the offshore windfarm polygon.</td>
</tr>
<tr class="even">
<td>unique_id</td>
<td>string</td>
<td>Unique identifier in the dataset (Country + Number)</td>
</tr>
<tr class="odd">
<td>country</td>
<td>string</td>
<td>Country where the windfarm is located (ISO 3166-1 codes, GB is UK)</td>
</tr>
<tr class="even">
<td>status_group</td>
<td>string</td>
<td>Overarching status group the windfarm is in (definitions in Table 3)</td>
</tr>
<tr class="odd">
<td>status_explanation</td>
<td>string</td>
<td>Detailed explanation of the windfarm’s status (definitions in Table 3)</td>
</tr>
<tr class="even">
<td>date</td>
<td>datetime</td>
<td>Date when the current status of the offshore windfarm started, likely in the past.</td>
</tr>
<tr class="odd">
<td>target_mw</td>
<td>integer</td>
<td>Describes the target MW of the windfarm, if a range is applicable the maximum value is filled in. The target_mw is a integer value so it can be used in calculations.</td>
</tr>
<tr class="even">
<td>target_year</td>
<td>integer</td>
<td>Year that the offshore windfarm will enter that status, possibly in the future.</td>
</tr>
<tr class="odd">
<td>area_calculated</td>
<td>float</td>
<td>Describes the area in km² based on calculations using the local projection of a country.</td>
</tr>
<tr class="even">
<td>area_official</td>
<td>float</td>
<td>Describes the area in km² based on official documents.</td>
</tr>
<tr class="odd">
<td>operator</td>
<td>string</td>
<td>Describes the operator of the windfarm.</td>
</tr>
<tr class="even">
<td>n_turbines</td>
<td>integer</td>
<td>Number of turbines in the windfarm.</td>
</tr>
<tr class="odd">
<td>hub_height</td>
<td>integer</td>
<td>Hub height in meters based on the maximum possible value for hub height.</td>
</tr>
<tr class="even">
<td>n_rotorblades</td>
<td>integer</td>
<td>Number of rotorblades per turbine.</td>
</tr>
<tr class="odd">
<td>rotor_diameter</td>
<td>integer</td>
<td>Diameter of rotorblades per turbine in meters, if a range is applicable the maximum value is filled in.</td>
</tr>
<tr class="even">
<td>hammerblow_energy</td>
<td>integer</td>
<td>Energy delivered by the hammer to drive the piles into the seabed (kJ)</td>
</tr>
<tr class="odd">
<td>foundation_technique</td>
<td>string</td>
<td>Describes the foundation techniques (based on definitions in Table 5).</td>
</tr>
<tr class="even">
<td>mitigation</td>
<td>string</td>
<td>Link to mitigation measures, not publicly available</td>
</tr>
<tr class="odd">
<td>source</td>
<td>string</td>
<td>States the shapefile/geopackage data source used in the database.</td>
</tr>
<tr class="even">
<td>version</td>
<td>string</td>
<td>Version of the polygon. Current data is ‘v1’; older versions follow yearly numbered labels according to the convention ‘vyear’.</td>
</tr>
<tr class="odd">
<td>previous_id</td>
<td>string</td>
<td>Unique ID of the polygon used in a previous version of the database, which can be used to track the changes of a polygon over time</td>
</tr>
</tbody>
</table>
</section>
<section id="current-version" class="level2">
<h2 class="anchored" data-anchor-id="current-version">Current Version</h2>
<p>Current version of the <strong>NSEC Timelines</strong> database is v1 published on: <strong>5-11-2025</strong>. A yearly update is expected.</p>
<hr>
</section>
<section id="projection" class="level2">
<h2 class="anchored" data-anchor-id="projection">Projection</h2>
<p>The draft Offshore Windfarm database uses the <strong>WGS84 projection (EPSG:4326)</strong>, which is a globally recognized datum and a standard for global applications.</p>
<ul>
<li>The received data was already in EPSG:4326.</li>
<li>In some cases data was initially delivered in regional projections and later reprojected to match EPSG:4326.</li>
<li>For area calculations, a local projection has been used (Table 2) which also has been checked by the respective countries.</li>
</ul>
</section>
<section id="local-projection-table" class="level2">
<h2 class="anchored" data-anchor-id="local-projection-table">Local Projection Table</h2>
<table class="caption-top table">
<caption>Table 2. Local projections used for area calculation before reprojecting it to WGS84.</caption>
<thead>
<tr class="header">
<th>Country</th>
<th>Projection (EPSG Code)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>BE</td>
<td>32631</td>
</tr>
<tr class="even">
<td>NO</td>
<td>25833</td>
</tr>
<tr class="odd">
<td>DE</td>
<td>3035</td>
</tr>
<tr class="even">
<td>DK</td>
<td>25832</td>
</tr>
<tr class="odd">
<td>IR</td>
<td>32629</td>
</tr>
<tr class="even">
<td>FR</td>
<td>25830</td>
</tr>
<tr class="odd">
<td>UK</td>
<td>27700</td>
</tr>
<tr class="even">
<td>NL</td>
<td>32631</td>
</tr>
</tbody>
</table>
</section>
</section>
<section id="status" class="level1">
<h1>3. Status</h1>
<table class="caption-top table">
<caption>Table 3. Options for status_group and status_explanation used in the NSEC Timelines database</caption>
<colgroup>
<col style="width: 28%">
<col style="width: 71%">
</colgroup>
<thead>
<tr class="header">
<th>status_group</th>
<th>status_explanation</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Planning</td>
<td>Wind energy development zone - Search Area</td>
</tr>
<tr class="even">
<td>Planning</td>
<td>Wind energy development area - Wind Energy Site</td>
</tr>
<tr class="odd">
<td>Planning</td>
<td>Development site under pre-investigation</td>
</tr>
<tr class="even">
<td>Planning</td>
<td>Wind energy site for tendering</td>
</tr>
<tr class="odd">
<td>Planning</td>
<td>Wind energy site awarded</td>
</tr>
<tr class="even">
<td>Development</td>
<td>OWF approved</td>
</tr>
<tr class="odd">
<td>Development</td>
<td>OWF under construction</td>
</tr>
<tr class="even">
<td>Production</td>
<td>OWF in operation</td>
</tr>
<tr class="odd">
<td>Decommissioning</td>
<td>OWF Decommissioned</td>
</tr>
</tbody>
</table>
<section id="attributes-to-be-filled-in-with-each-status" class="level2">
<h2 class="anchored" data-anchor-id="attributes-to-be-filled-in-with-each-status">Attributes to be filled in with each status</h2>
<table class="caption-top table">
<caption>Table 4. Attributes filled in with each status.</caption>
<colgroup>
<col style="width: 7%">
<col style="width: 18%">
<col style="width: 73%">
</colgroup>
<thead>
<tr class="header">
<th>status_group</th>
<th>status_explanation</th>
<th>attributes to fill in:</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Planning</td>
<td>Wind energy development zone - Search Area</td>
<td>Name, Geometry, Target _MW, area, year, country</td>
</tr>
<tr class="even">
<td>Planning</td>
<td>Wind energy development area - Wind Energy Site</td>
<td></td>
</tr>
<tr class="odd">
<td>Planning</td>
<td>Development site under pre-investigation</td>
<td></td>
</tr>
<tr class="even">
<td>Planning</td>
<td>Wind energy site for tendering</td>
<td>Name, Geometry, Target _MW, area, year, country</td>
</tr>
<tr class="odd">
<td>Planning</td>
<td>Wind energy site awarded</td>
<td>Name, Geometry, Target _MW, area, year, operator, country</td>
</tr>
<tr class="even">
<td>Development</td>
<td>OWF approved</td>
<td>Name, Geometry, Target _MW, area, year, operator, foundation, technique, number of turbines, hub height, number of rotorblades, rotor diameter, (hammerblow energy), country, mitigation measures (as a link to a document)</td>
</tr>
<tr class="odd">
<td>Development</td>
<td>OWF under construction</td>
<td></td>
</tr>
<tr class="even">
<td>Production</td>
<td>OWF in operation</td>
<td></td>
</tr>
<tr class="odd">
<td>Decommissioning</td>
<td>OWF Decommissioned</td>
<td></td>
</tr>
</tbody>
</table>
</section>
<section id="mapping-status-used-in-uk-ireland-to-nsec-status" class="level2">
<h2 class="anchored" data-anchor-id="mapping-status-used-in-uk-ireland-to-nsec-status">Mapping status used in UK &amp; Ireland to NSEC status</h2>
<p>Uk &amp; Ireland have different status phases compared to the other countries in NSEC. For both UK and Ireland, a suitable mapping had to be discussed in order for the status to align with the national and NSEC-used vocabulary.</p>
<section id="ireland-mapping" class="level3">
<h3 class="anchored" data-anchor-id="ireland-mapping">Ireland mapping:</h3>
<ol type="1">
<li>As long as an operator doesn’t have a MAC (Maritime Area Consent: gain temporary rights over an area of seabed from the state), it will stay as “Wind energy site”.</li>
<li>When the operator has a MAC, but not yet a planning consent from An Bord Pleanála (The Planning Board: the national planning appeals board), it will be ‘Wind energy site awarded’ (and this implies that this is a status that is in an equally advanced stage as the UK states ‘In Planning’ and ‘Government Support on Offer’)</li>
<li>Only when the operator has both a MAC and a planning consent, it will be “OWF approved”.</li>
</ol>
<p>Final Mapping:</p>
<ol type="1">
<li><p>DMAP-area (area as described in the National Designated Maritime Area Plan) = ‘Wind energy development zone - Search Area’</p></li>
<li><p>Area inside a DMAP-area, that will next either go through an auction (ORESS) or through a merchant route = “Wind energy site”</p></li>
<li><ol type="a">
<li>ORESS-site = “Wind energy site for tendering”, and when it has been granted to a specific project operator it is a “Wind energy site awarded”</li>
</ol></li>
<li><ol start="2" type="a">
<li>Site through merchant route = This will still be categorized as a “Wind energy site”, and only when the MAC is granted to a specific project operator it is a “Wind energy site awarded”.</li>
</ol></li>
<li><p>The end result of either an ORESS-site or a site through merchant route = “Wind energy site awarded”.</p></li>
</ol>
<p>After that, the project operator will apply for all the necessary permits and will then follow the next phases of (compliant with the other phases used in NSEC countries):</p>
<ol start="5" type="1">
<li>“OWF approved” (when all the permits have been approved, so the project operator can then start to build).</li>
<li>“OWF under construction” (when the offshore construction starts).</li>
<li>“OWF in operation” (when the offshore wind farm is fully operational).</li>
</ol>
</section>
<section id="uk-mapping" class="level3">
<h3 class="anchored" data-anchor-id="uk-mapping">UK Mapping:</h3>
<p>In the UK, two parties are responsible for the Offshore Windfarm data. In England, Wales, &amp; Northern Ireland, this is the Crown Estate. In Scotland this is the Crown Estate Scotland. Data from both parties needs to be considered, even though Scotland does not have representation in NSEC SG2.</p>
<p>For the ‘In Planning’ sites, the site’s developer has an agreement to lease the site area from the seabed owner (The Crown Estate or Crown Estate Scotland), but they do not have planning approval from Government to begin construction. The site would remain defined as ‘Wind energy site awarded’.</p>
<p>‘Government Support on Offer’ refers to a slightly more advanced state of a site, where along with the agreement for lease, the site also has a financial ‘Contract for Difference’ agreed with the UK Government after being successful in an auction. At this stage it still does not have planning approval, so ‘OWF approved’ is not correct. This is mapped as ‘wind energy site awarded’.</p>
<p>The ‘Wind energy site for tendering’ status is not appropriate, as all of these sites would have already been through tendering in the UK system, or were not subject to tendering in the first place (all the sites with a status of ‘Pre-planning Application’ are already past this stage). This would be ‘Wind energy site awarded’. Except for sites that were not subject to tender and so, presumably, were subject of private agreements to provide electricity similar to our ‘merchant route’ to market. These sites remain ‘Wind energy site’ status but could be considered ‘wind energy site awarded’ once a lease is granted and the developer becomes entitled to apply for planning consent.</p>
<ol type="1">
<li><p>Area designated for OWE development in an MSP = ‘Wind energy development zone - Search Area’.</p></li>
<li><p>In Planning (developer has an agreement to lease the site, but not yet planning approval from Government to begin construction) = “Wind energy site awarded”.</p></li>
<li><ol type="a">
<li>Pre-planning Application (and subject to tendering) = “Wind energy site awarded”.</li>
</ol></li>
<li><ol start="2" type="a">
<li>Pre-planning Application (not subject to tendering, but private agreements) and granted a lease = “Wind energy site awarded”.</li>
</ol></li>
<li><p>Government Support on Offer = “Wind energy site awarded”.</p></li>
</ol>
<p>After that, the project operator will apply for all the necessary permits and will then follow the next phases of (compliant with the other phases used in NSEC countries):</p>
<ol start="5" type="1">
<li><p>Consented = “OWF approved” (when all the permits have been approved, so the project operator can then start to build).</p></li>
<li><p>Under Construction = “OWF under construction” (when the offshore construction starts).</p></li>
<li><p>Operational = “OWF in operation” (when the offshore wind farm is fully operational).</p></li>
</ol>
</section>
</section>
</section>
<section id="foundation-technique" class="level1">
<h1>4. Foundation Technique</h1>
<table class="caption-top table">
<caption>Table 5. Foundation techniques used.</caption>
<thead>
<tr class="header">
<th>Foundation_technique</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Grounded: Not Specified</td>
</tr>
<tr class="even">
<td>Grounded: Various</td>
</tr>
<tr class="odd">
<td>Grounded: Monopile</td>
</tr>
<tr class="even">
<td>Grounded: Gravity-Base</td>
</tr>
<tr class="odd">
<td>Grounded: Tripod</td>
</tr>
<tr class="even">
<td>Grounded: Jacket</td>
</tr>
<tr class="odd">
<td>Grounded: Tripile</td>
</tr>
<tr class="even">
<td>Floating: Spar Floater</td>
</tr>
<tr class="odd">
<td>Floating: Semi-Submersible Platform</td>
</tr>
<tr class="even">
<td>Floating: Not Specified</td>
</tr>
<tr class="odd">
<td>Unknown</td>
</tr>
</tbody>
</table>
</section>

</main>
<!-- /main column -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const isCodeAnnotation = (el) => {
    for (const clz of el.classList) {
      if (clz.startsWith('code-annotation-')) {                     
        return true;
      }
    }
    return false;
  }
  const onCopySuccess = function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  }
  const getTextToCopy = function(trigger) {
      const codeEl = trigger.previousElementSibling.cloneNode(true);
      for (const childEl of codeEl.children) {
        if (isCodeAnnotation(childEl)) {
          childEl.remove();
        }
      }
      return codeEl.innerText;
  }
  const clipboard = new window.ClipboardJS('.code-copy-button:not([data-in-quarto-modal])', {
    text: getTextToCopy
  });
  clipboard.on('success', onCopySuccess);
  if (window.document.getElementById('quarto-embedded-source-code-modal')) {
    const clipboardModal = new window.ClipboardJS('.code-copy-button[data-in-quarto-modal]', {
      text: getTextToCopy,
      container: window.document.getElementById('quarto-embedded-source-code-modal')
    });
    clipboardModal.on('success', onCopySuccess);
  }
    var localhostRegex = new RegExp(/^(?:http|https):\/\/localhost\:?[0-9]*\//);
    var mailtoRegex = new RegExp(/^mailto:/);
      var filterRegex = new RegExp('/' + window.location.host + '/');
    var isInternal = (href) => {
        return filterRegex.test(href) || localhostRegex.test(href) || mailtoRegex.test(href);
    }
    // Inspect non-navigation links and adorn them if external
 	var links = window.document.querySelectorAll('a[href]:not(.nav-link):not(.navbar-brand):not(.toc-action):not(.sidebar-link):not(.sidebar-item-toggle):not(.pagination-link):not(.no-external):not([aria-hidden]):not(.dropdown-item):not(.quarto-navigation-tool):not(.about-link)');
    for (var i=0; i<links.length; i++) {
      const link = links[i];
      if (!isInternal(link.href)) {
        // undo the damage that might have been done by quarto-nav.js in the case of
        // links that we want to consider external
        if (link.dataset.originalHref !== undefined) {
          link.href = link.dataset.originalHref;
        }
      }
    }
  function tippyHover(el, contentFn, onTriggerFn, onUntriggerFn) {
    const config = {
      allowHTML: true,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start',
    };
    if (contentFn) {
      config.content = contentFn;
    }
    if (onTriggerFn) {
      config.onTrigger = onTriggerFn;
    }
    if (onUntriggerFn) {
      config.onUntrigger = onUntriggerFn;
    }
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      if (note) {
        return note.innerHTML;
      } else {
        return "";
      }
    });
  }
  const xrefs = window.document.querySelectorAll('a.quarto-xref');
  const processXRef = (id, note) => {
    // Strip column container classes
    const stripColumnClz = (el) => {
      el.classList.remove("page-full", "page-columns");
      if (el.children) {
        for (const child of el.children) {
          stripColumnClz(child);
        }
      }
    }
    stripColumnClz(note)
    if (id === null || id.startsWith('sec-')) {
      // Special case sections, only their first couple elements
      const container = document.createElement("div");
      if (note.children && note.children.length > 2) {
        container.appendChild(note.children[0].cloneNode(true));
        for (let i = 1; i < note.children.length; i++) {
          const child = note.children[i];
          if (child.tagName === "P" && child.innerText === "") {
            continue;
          } else {
            container.appendChild(child.cloneNode(true));
            break;
          }
        }
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(container);
        }
        return container.innerHTML
      } else {
        if (window.Quarto?.typesetMath) {
          window.Quarto.typesetMath(note);
        }
        return note.innerHTML;
      }
    } else {
      // Remove any anchor links if they are present
      const anchorLink = note.querySelector('a.anchorjs-link');
      if (anchorLink) {
        anchorLink.remove();
      }
      if (window.Quarto?.typesetMath) {
        window.Quarto.typesetMath(note);
      }
      if (note.classList.contains("callout")) {
        return note.outerHTML;
      } else {
        return note.innerHTML;
      }
    }
  }
  for (var i=0; i<xrefs.length; i++) {
    const xref = xrefs[i];
    tippyHover(xref, undefined, function(instance) {
      instance.disable();
      let url = xref.getAttribute('href');
      let hash = undefined; 
      if (url.startsWith('#')) {
        hash = url;
      } else {
        try { hash = new URL(url).hash; } catch {}
      }
      if (hash) {
        const id = hash.replace(/^#\/?/, "");
        const note = window.document.getElementById(id);
        if (note !== null) {
          try {
            const html = processXRef(id, note.cloneNode(true));
            instance.setContent(html);
          } finally {
            instance.enable();
            instance.show();
          }
        } else {
          // See if we can fetch this
          fetch(url.split('#')[0])
          .then(res => res.text())
          .then(html => {
            const parser = new DOMParser();
            const htmlDoc = parser.parseFromString(html, "text/html");
            const note = htmlDoc.getElementById(id);
            if (note !== null) {
              const html = processXRef(id, note);
              instance.setContent(html);
            } 
          }).finally(() => {
            instance.enable();
            instance.show();
          });
        }
      } else {
        // See if we can fetch a full url (with no hash to target)
        // This is a special case and we should probably do some content thinning / targeting
        fetch(url)
        .then(res => res.text())
        .then(html => {
          const parser = new DOMParser();
          const htmlDoc = parser.parseFromString(html, "text/html");
          const note = htmlDoc.querySelector('main.content');
          if (note !== null) {
            // This should only happen for chapter cross references
            // (since there is no id in the URL)
            // remove the first header
            if (note.children.length > 0 && note.children[0].tagName === "HEADER") {
              note.children[0].remove();
            }
            const html = processXRef(null, note);
            instance.setContent(html);
          } 
        }).finally(() => {
          instance.enable();
          instance.show();
        });
      }
    }, function(instance) {
    });
  }
      let selectedAnnoteEl;
      const selectorForAnnotation = ( cell, annotation) => {
        let cellAttr = 'data-code-cell="' + cell + '"';
        let lineAttr = 'data-code-annotation="' +  annotation + '"';
        const selector = 'span[' + cellAttr + '][' + lineAttr + ']';
        return selector;
      }
      const selectCodeLines = (annoteEl) => {
        const doc = window.document;
        const targetCell = annoteEl.getAttribute("data-target-cell");
        const targetAnnotation = annoteEl.getAttribute("data-target-annotation");
        const annoteSpan = window.document.querySelector(selectorForAnnotation(targetCell, targetAnnotation));
        const lines = annoteSpan.getAttribute("data-code-lines").split(",");
        const lineIds = lines.map((line) => {
          return targetCell + "-" + line;
        })
        let top = null;
        let height = null;
        let parent = null;
        if (lineIds.length > 0) {
            //compute the position of the single el (top and bottom and make a div)
            const el = window.document.getElementById(lineIds[0]);
            top = el.offsetTop;
            height = el.offsetHeight;
            parent = el.parentElement.parentElement;
          if (lineIds.length > 1) {
            const lastEl = window.document.getElementById(lineIds[lineIds.length - 1]);
            const bottom = lastEl.offsetTop + lastEl.offsetHeight;
            height = bottom - top;
          }
          if (top !== null && height !== null && parent !== null) {
            // cook up a div (if necessary) and position it 
            let div = window.document.getElementById("code-annotation-line-highlight");
            if (div === null) {
              div = window.document.createElement("div");
              div.setAttribute("id", "code-annotation-line-highlight");
              div.style.position = 'absolute';
              parent.appendChild(div);
            }
            div.style.top = top - 2 + "px";
            div.style.height = height + 4 + "px";
            div.style.left = 0;
            let gutterDiv = window.document.getElementById("code-annotation-line-highlight-gutter");
            if (gutterDiv === null) {
              gutterDiv = window.document.createElement("div");
              gutterDiv.setAttribute("id", "code-annotation-line-highlight-gutter");
              gutterDiv.style.position = 'absolute';
              const codeCell = window.document.getElementById(targetCell);
              const gutter = codeCell.querySelector('.code-annotation-gutter');
              gutter.appendChild(gutterDiv);
            }
            gutterDiv.style.top = top - 2 + "px";
            gutterDiv.style.height = height + 4 + "px";
          }
          selectedAnnoteEl = annoteEl;
        }
      };
      const unselectCodeLines = () => {
        const elementsIds = ["code-annotation-line-highlight", "code-annotation-line-highlight-gutter"];
        elementsIds.forEach((elId) => {
          const div = window.document.getElementById(elId);
          if (div) {
            div.remove();
          }
        });
        selectedAnnoteEl = undefined;
      };
        // Handle positioning of the toggle
    window.addEventListener(
      "resize",
      throttle(() => {
        elRect = undefined;
        if (selectedAnnoteEl) {
          selectCodeLines(selectedAnnoteEl);
        }
      }, 10)
    );
    function throttle(fn, ms) {
    let throttle = false;
    let timer;
      return (...args) => {
        if(!throttle) { // first call gets through
            fn.apply(this, args);
            throttle = true;
        } else { // all the others get throttled
            if(timer) clearTimeout(timer); // cancel #2
            timer = setTimeout(() => {
              fn.apply(this, args);
              timer = throttle = false;
            }, ms);
        }
      };
    }
      // Attach click handler to the DT
      const annoteDls = window.document.querySelectorAll('dt[data-target-cell]');
      for (const annoteDlNode of annoteDls) {
        annoteDlNode.addEventListener('click', (event) => {
          const clickedEl = event.target;
          if (clickedEl !== selectedAnnoteEl) {
            unselectCodeLines();
            const activeEl = window.document.querySelector('dt[data-target-cell].code-annotation-active');
            if (activeEl) {
              activeEl.classList.remove('code-annotation-active');
            }
            selectCodeLines(clickedEl);
            clickedEl.classList.add('code-annotation-active');
          } else {
            // Unselect the line
            unselectCodeLines();
            clickedEl.classList.remove('code-annotation-active');
          }
        });
      }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->




</body></html>